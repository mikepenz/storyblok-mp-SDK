/*
 * Copyright 2017-2019 JetBrains s.r.o. Use of this source code is governed by the Apache 2.0 license.
 * Copyright 2020 Modified by Mike Penz to be more flexible
 */

project.ext.pomConfig = {
    licenses {
        license {
            name POM_LICENCE_NAME
            url POM_LICENCE_URL
            distribution POM_LICENCE_DIST
        }
    }
    developers {
        developer {
            id POM_DEVELOPER_ID
            name POM_DEVELOPER_NAME
            email 'mikepenz@gmail.com'
        }
    }

    scm {
        url POM_SCM_URL
        connection POM_SCM_CONNECTION
        developerConnection POM_SCM_DEV_CONNECTION
    }
}

project.ext.configureMavenCentralMetadata = { pom ->
    def variantName = "${project.name}"
    if (variantName == "library") {
        variantName = POM_ARTIFACT_ID
    }

    def root = asNode()
    root.appendNode('name', variantName)
    root.appendNode('description', POM_DESCRIPTION)
    root.appendNode('url', POM_URL)
    root.children().last() + pomConfig
}